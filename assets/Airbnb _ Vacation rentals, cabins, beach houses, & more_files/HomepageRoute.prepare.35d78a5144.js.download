__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getExploreIsLeanTreatmentFlag=function(){return!1}}),"0d1817",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var n=r(d[0]).default;function t(){const n=r(d[1]);return t=function(){return n},n}Object.defineProperty(e,"__esModule",{value:!0}),e.ClientNormalizeSearchPaths=function({redirectUrl:n}){const l=(0,f.useLocation)();return n=n??O(l),(0,s.useEffect)((()=>{if(null!=n){const s=(0,t().parsePath)(n);(0,p.replaceToHistory)(s.pathname,{params:(0,E.default)(s.search)})}}),[n]),null},e.getRedirectUrl=O;var s=r(d[2]),l=r(d[3]),c=r(d[4]),o=r(d[5]),u=r(d[6]),E=n(r(d[7])),p=r(d[8]),f=r(d[9]),S=n(r(d[10])),h=n(r(d[11]));function _(n){return n.replace(/^\/s\/[^/]+\/(homes|experiences)/,'/s/:location/$1')}function O(n){const t=(0,l.selectFiltersFromURL)({pathname:n.pathname,queryString:n.search}),s=(t||{}).refinement_paths,p=(0,c.getTabFromRefinementPaths)(s),f={tabId:p,basePath:u.SEARCH_ENDPOINT};let O=n.search;const R=(0,E.default)(O),P=(0,o.makeSearchPath)(t,f);if(![u.EXPLORE_TABS.HOMES,u.EXPLORE_TABS.EXPERIENCES].includes(p))return p===u.EXPLORE_TABS.ADVENTURES||p===u.EXPLORE_TABS.SELECT_HOMES?(O=decodeURIComponent((0,o.makeQueryStrings)(R,f)),`${P}${O}`):'/';if(s?.some((n=>'string'==typeof n&&n.startsWith('/playlists')))??!1)return'/';if(h.default.getBootstrap('online_experiences_tab_removal.enable')&&(0,o.isOnlineExperiences)(t,p??u.EXPLORE_TABS.HOMES))return'/s/experiences';const T=s?.[0];if((0,o.isOnlineExperiences)(t,p??u.EXPLORE_TABS.HOMES)&&null!=R.refinement_paths&&'/experiences'!==T&&!(0,o.isOnlineExperiencesSearchRefinementPath)(t))return O=decodeURIComponent((0,o.makeQueryStrings)((0,S.default)(R,['refinement_paths']),f)),`${P}${O}`;if((0,o.isOnlineExperiences)(t,p??u.EXPLORE_TABS.HOMES)&&(null!=t.location||null!=t.query||null!=t.place_id))return O=decodeURIComponent((0,o.makeQueryStrings)((0,S.default)(R,['location','query','place_id']),f)),`${P}${O}`;return _(n.pathname)!==_(P)?`${P}${O}`:null}}),"0ef88a",["ba7a76","d69748","07aa1f","418c7a","aea415","f4229b","87916a","a7c4ef","4ee5a9","1e300f","3d4f9e","c235f8"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserInputLocation=function(n){return t.some((t=>n[t]))};const t=['place_id','query']}),"1c3fbf",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return u.default.get('exploreTreatments')||[]};var u=t(r(d[1]))}),"23c701",["ba7a76","ef2bc3"]);
__d((function(g,r,i,a,m,e,d){"use strict";function t(n){return null==n?[]:Array.isArray(n)?n.flatMap(t):'string'==typeof n?[n]:[JSON.stringify(n)]}Object.defineProperty(e,"__esModule",{value:!0}),e.convertToRawParams=function(n){const s=[];return Object.keys(n).forEach((o=>{const u=t(n[o]);s.push({filterName:o,filterValues:u})})),s}}),"294886",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.selectedFiltersExperimentTreatmentFlag=function({flagger:t,isCompact:n}){return'treatment'===(n?t.findTreatment((0,l.default)('selected_filters_2024_moweb'),{log:!1}):t.findTreatment((0,l.default)('selected_filters_2024_web'),{log:!1}))?['selected_filters_2024_treatment']:[]};var l=t(r(d[1]))}),"2e3614",["ba7a76","4d3544"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.getRequestVariables=function({categoryBarCacheId:t,location:M,formFactor:_,isReduceNetworkDataEnabled:p=!1,cookie:A,flagger:C}){const O=_===u.FORM_FACTOR.COMPACT,L=(0,l.default)(M.search),{mock:h}=L,S='true'===L.drawer_open,q=[...f.HOMEPAGE_MAP_FEED_DECOUPLING_TREATMENT_FLAGS,...f.LAUNCHED_ERF_TREATMENT_FLAGS,...(0,F.recommendedFiltersExperimentTreatmentFlag)({flagger:C,isCompact:O}),...(0,T.selectedFiltersExperimentTreatmentFlag)({flagger:C,isCompact:O})],y=(0,P.getListingCardMigrationParams)(C);if(h)return{mockIdentifier:`ExplorePresentation/${h}`,includeMapResults:!0,isPaginatedRequest:!1,isLeanTreatment:(0,R.getExploreIsLeanTreatmentFlag)(),...y};let D=0;S&&(D=(0,c.default)({isReduceNetworkDataEnabled:p}));const b={cdnCacheSafe:!1,defaultRefinementPaths:(0,n.getRefinementPathsFromTab)(s.EXPLORE_TABS.HOMES),defaultSearchMode:'flex_destinations_search',defaultTabId:s.EXPLORE_TABS.ALL,isPWA:_===u.FORM_FACTOR.COMPACT,isReduceNetworkDataEnabled:p,location:M,requestedPageType:'HOMEPAGE',treatmentFlags:(0,E.manageTreatmentFlagsWithUpfrontPricingFlagForPrepare)(q,A)},I=(0,o.selectStaysFiltersForRequestDirect)({...b,isMapRequest:!1,maxMapItems:D,otherRawParams:{...t&&{categoryBarCacheId:t},...p?{firstCategoryOverrideDisabled:'true'}:{}}}),x=(0,o.selectStaysFiltersForRequestDirect)({...b,isMapRequest:!0});return{staysSearchRequest:I,staysMapSearchRequestV2:x,includeMapResults:S,isPaginatedRequest:!1,isLeanTreatment:(0,R.getExploreIsLeanTreatmentFlag)(),...y}};var s=r(d[1]),n=r(d[2]),l=t(r(d[3])),o=r(d[4]),c=t(r(d[5])),u=r(d[6]),E=r(d[7]),R=r(d[8]),F=r(d[9]),T=r(d[10]),f=r(d[11]),P=r(d[12])}),"360d23",["ba7a76","87916a","e8a3e4","a7c4ef","37a7ab","7c1298","b679e8","74d137","0d1817","417a6b","2e3614","f36c5b","ef12a6"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default,s=r(d[1]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=q,e.selectStaysFiltersForRequestDirect=function({location:t,requestedPageType:s,skipHydrationListingIds:o,maxMapItems:c,...l}){const u=(0,h.default)(t.search),f={...void 0!==c&&{maxMapItems:c},requestedPageType:s,...q({...l,location:t,knownFilterKeys:T.STAYS_SEARCH_FILTER_KEYS})};if(u.search_type===n.SearchType.USER_MAP_MOVE&&o?.length)return{...f,skipHydrationListingIds:o};return f};var n=r(d[2]),o=r(d[3]),c=r(d[4]),l=s(r(d[5])),u=r(d[6]),f=r(d[7]),_=r(d[8]),h=t(r(d[9])),p=r(d[10]),y=t(r(d[11])),P=t(r(d[12])),R=r(d[13]),T=r(d[14]),F=t(r(d[15]));function b(t){const s=t.query||t.place_id||t.location;return'flex_destinations_search'===t.search_mode&&s&&!t.category_tag&&delete t.search_mode,t}function S(t){const s=[...t];return s.sort(((t,s)=>(t?.filterName??'').localeCompare(s?.filterName??''))),s}function k(t,s,n){const o={...(0,f.getTabLocationFromPath)(t.pathname),...s&&{tab_id:s},refinement_paths:n};return o.refinement_paths||(o.refinement_paths=(0,_.getRefinementPathsFromTab)(o.tab_id)),o}function M(t){return(0,y.default)(t,F.default)}function q({cdnCacheSafe:t,defaultRefinementPaths:s,defaultSearchMode:n,defaultTabId:f,isMapRequest:_,isPrefetch:T,isPWA:F,isReduceNetworkDataEnabled:q,knownFilterKeys:w,location:C,otherRawParams:E,treatmentFlags:I}){const K=(0,h.default)(C?.search);let v={...(0,o.getConstantFields)(),cdn_cache_safe:t,treatment_flags:I,screen_size:F?'small':'large',...n&&{search_mode:n},...M(K),...k(C,K.tab_id||f,K.refinement_paths||s),...q&&{max_categories:8}};F&&delete v.map_toggle,v=b(v),v=(0,c.satorifyQuery)((0,l.default)(v));const A=(0,u.getItemsPerGrid)({isMapRequest:_,isPrefetch:T,isReduceNetworkDataEnabled:q,isPWA:F,urlFilters:v});null!==A&&(v.items_per_grid=A),v=(0,l.coerceCorrectTypes)(v,{forRequest:!0}),delete v.zoom;return{...(0,R.snakeKeysToCamelKeys)((0,P.default)(v,w)),rawParams:S((0,p.convertToRawParams)((0,R.snakeKeysToCamelKeys)({...(0,y.default)(v,w),...E})))}}}),"37a7ab",["ba7a76","45f788","6660fd","833694","ea30d6","c6fd31","72c4f8","b8eb4a","e8a3e4","a7c4ef","294886","3d4f9e","45db44","fd0757","977a9f","92da7e"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t,...n){if(null==t)return{};const u=new Set(n.flat().map(String));return Object.fromEntries(Object.entries(t||{}).filter((([t])=>!u.has(t))))}}),"3d4f9e",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=t(r(d[1]));const u={document:void 0,getDocument:()=>r(d[3])(d[2]).then(f.default).then((t=>t.default)),name:'Homepage',type:'query',operationId:'bcd1ae7f2ada9d56f62b5f6754932291fd30b51aab82c5ba716f2c3cb6822510'};e.default=u}),"3e1d2e",["ba7a76","45f788","9e4bac","057569"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.recommendedFiltersExperimentTreatmentFlag=function({flagger:t,isCompact:n}){if('treatment'===(n?t.findTreatment((0,_.default)('recommended_filters_v2_2024_moweb'),{log:!1}):t.findTreatment((0,_.default)('recommended_filters_v2_2024_web'),{log:!1})))return['recommended_filters_v2_2024_treatment','recommended_filters_2024_treatment_b'];return['recommended_filters_2024_treatment_b']};var _=t(r(d[1]))}),"417a6b",["ba7a76","4d3544"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.selectFiltersFromURL=void 0;var n=t(r(d[1])),o=t(r(d[2])),s=t(r(d[3])),_=r(d[4]),c=r(d[5]),l=r(d[6]),u=r(d[7]),f=r(d[8]);function h(t){return(0,s.default)((0,o.default)(t),c.KNOWN_SEARCH_QUERY_PARAMS)}function F(t){const n=t.query||t.place_id||t.location;return'flex_destinations_search'===t.search_mode&&n&&!t.category_tag&&delete t.search_mode,t}e.selectFiltersFromURL=(0,n.default)((({pathname:t})=>t||''),(({queryString:t})=>t||''),((t,n)=>{if(['/','','/fallback-homepage'].includes(t))return{tab_id:_.EXPLORE_TABS.ALL,refinement_paths:(0,l.getRefinementPathsFromTab)(_.EXPLORE_TABS.HOMES),search_mode:'flex_destinations_search',...(0,u.convertToFilterShapeFromURLWithPruning)({...h(n)})};let o={...h(n),...(0,f.getTabLocationFromPath)(t)};return o=F(o),(0,u.convertToFilterShapeFromURLWithPruning)({...o,...o.refinement_paths?{}:{refinement_paths:(0,l.getRefinementPathsFromTab)(o.tab_id)}})}))}),"418c7a",["ba7a76","ab2414","a7c4ef","45db44","87916a","79ac7c","e8a3e4","c6fd31","b8eb4a"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,...n){if(null==t)return{};const u=new Set([...n].flat().map(String));return Object.fromEntries(Object.entries(t).filter((([t])=>u.has(t))))}}),"45db44",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=s,e.replaceToHistory=function(t,n={}){s((0,o.getHistory)(),t,n)};var n=t(r(d[1])),o=r(d[2]);function s(t,o,{maintainScrollPosition:s=!1,maintainQueryParams:l=!1,maintainHash:u=!1,params:c,state:f}={}){const p=(0,n.default)(o,{maintainQueryParams:l,maintainHash:u,params:c});t.replace(p,f),g.window&&!s&&g.window.scrollTo(0,0)}}),"4ee5a9",["ba7a76","be6a20","7934b6"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getItemsPerGrid=function({isReduceNetworkDataEnabled:c,isPWA:f,urlFilters:o,isMapRequest:h,isPrefetch:_}){if(h)return c&&!_?8:null;if(c)return 8;if((0,n.hasUserInputLocation)(o)&&(l=o,l.refinement_paths?.[0]?.startsWith('/homes')))return 18;var l;if(!f&&u(o)&&s(o))return 24;return t.LISTINGS_PER_PAGE};var t=r(d[0]),n=r(d[1]);function s(t){return!(!t.checkin||!t.checkout)}function u(t){return t.refinement_paths?.[0]?.startsWith('/experiences')}}),"72c4f8",["6660fd","1c3fbf"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.manageTreatmentFlagsWithUpfrontPricingFlag=function(t){return v(t,!!u.default.current().enable_upfront_pricing)},e.manageTreatmentFlagsWithUpfrontPricingFlagForPrepare=function(t,n){let o=!1;const u=n('_user_attributes');try{o=JSON.parse(decodeURIComponent(u||'')).enable_upfront_pricing}catch(t){}return v(t,o)},e.maybeRemoveUpfrontPricingParamsFromUrl=function(){requestIdleCallback((()=>{const t=u.default.current().enable_upfront_pricing;void 0!==t&&(0,s.airdogCount)('search.upfront_pricing.access_with_cookie',1,`value: ${t}`)}));(0,l.default)()[P]&&(0,f.getHistory)().replace(T())},e.setEnableUpfrontPricing=async function(t){return await(p.default.getBootstrap('api_web_client_migration.fejax.enabled')&&!p.default.getBootstrap('api_web_client_migration.fejax.pricing_guest.kill_switch')?(0,b().logMigration)(_().default.get("/_/core-guest-loop/upfront-pricing",{searchParams:{enable_upfront_pricing:t?'true':'false'}}),{method:'GET',client:'niobe',migrationId:'pricing_guest',group:'fejax'}):(0,b().logMigration)(c.default.ajax("/_/core-guest-loop/upfront-pricing?enable_upfront_pricing="+(t?'true':'false'),{dataType:'json',processResponse:!1}),{method:'GET',client:'fejax',migrationId:'pricing_guest',group:'fejax'})),u.default.setCurrent({...u.default.current(),enable_upfront_pricing:t}),Promise.resolve()},e.shouldShowUpfrontPricingBanner=function(t){if(p.default.getBootstrap('pricing_upfront_pricing_2022_toggle_killswitch')||t)return!1;if(U())return!1;return!0};var n=t(r(d[1]));function o(){const t=r(d[2]);return o=function(){return t},t}var u=t(r(d[3])),c=t(r(d[4])),l=t(r(d[5])),f=r(d[6]),p=t(r(d[7])),s=r(d[8]);function _(){const n=t(r(d[9]));return _=function(){return n},n}function b(){const t=r(d[10]);return b=function(){return t},t}var h=t(r(d[11]));const P='enable_upfront_pricing',I='upfront_pricing_enabled',E=['AT','BE','BG','HR','CY','CZ','DK','EE','FI','FR','DE','GR','IE','IT','LV','LT','LU','MT','NL','PL','PT','RO','SK','SI','ES','SE','GB','IS','LI','NO','AU','KR','CH','HU','CA','IL','CN','NZ'];function T(){const t=(0,l.default)(),{pathname:n,hash:u}=window.location,c={...t};delete c[P];return`${n}?${(0,o().stringify)(c)}${u}`}function U(){return!(!E.includes(n.default.country())&&!E.includes(n.default.tld_country()))}function v(t,n){let o=t;return n||(o=t.filter((t=>t!==I))),n&&!t.includes(I)&&(o=[...t,I]),o.filter(h.default)}}),"74d137",["ba7a76","862e50","e950a3","06a99e","c3984f","a7c4ef","7934b6","c235f8","3e4681","69a7c4","7c530a","58861b"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({isReduceNetworkDataEnabled:t}){return t?16:9999}}),"7c1298",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.logMigration=function(t,c){return Promise.resolve(t).then((()=>u({...c,result:'success'}))).catch((t=>{u({...c,result:'error',responseStatus:t?.status,noError:!t}),o.default.getBootstrap('niobe.rest.error_logging.kill_switch')||!t||t.status&&200!==t.status||((0,s.airdogCount)('rest_migration.debug',1,{...c,responseStatus:t.status,responseStatusText:t.statusText,message:t.message||'',name:t.name||''}),(0,n().reportNiobeError)(t,{fingerprint:['niobe'],tags:{...c}}))})).catch((()=>{})),t};var s=r(d[1]),o=t(r(d[2]));function n(){const t=r(d[3]);return n=function(){return t},t}function u(t){(0,s.airdogCount)('rest_migration.request',1,t)}}),"7c530a",["ba7a76","3e4681","c235f8","8e002d"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=r(d[1]),l=r(d[2]),s=r(d[3]),n=t(r(d[4])),c=t(r(d[5])),u=r(d[6]);e.default=function({location:t,cookie:f,loadQuery:p,exploreTreatments:y,customPrepareNiobeData:_,previousPrepareProps:k,getErf:R,getRenderingState:b,flagger:v}){const{deviceUsagePreferences:h,isBotRequest:T,formFactor:x=l.DEFAULT_FORM_FACTOR}=_||{},F=(0,o.createTaskController)(),P=k?.queryRef?.result?.data?.presentation?.staysSearch?.results?.categoryBar?.categoryBarCacheId,{isReduceNetworkDataEnabled:S}=h||{},q=(0,u.getRequestVariables)({categoryBarCacheId:P,cookie:f,exploreTreatments:y,location:t,formFactor:x,isReduceNetworkDataEnabled:S,flagger:v}),C=(0,s.getRedirectUrl)(t);let D;return T?D=!1:'client-render'===b()?D=!0:(D=!(y??[]).some((t=>'disable_early_flush_skeleton'===t.experiment&&'treatment'===t.treatmentName)),(0,n.default)({experimentName:'disable_early_flush_skeleton',exploreTreatments:y,renderingState:b(),getErfServer:R})),{queryRef:p({context:{fetchOptions:{signal:F?.signal},taskController:F},variables:q,query:c.default,deferrable:D,usePOSTForQuery:!0,skip:null!=C}),showDeferredSkeleton:D,redirectUrl:C}}}),"7d5900",["ba7a76","a2c93f","b679e8","0ef88a","d271b5","3e1d2e","360d23"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.formatFiltersForExploreRequest=function(t){return(0,n.snakeKeysToCamelKeys)((0,s.default)((0,u.coerceCorrectTypes)(t,{forRequest:!0}),_.DORA_FILTER_KEYS))},e.getConstantFields=function(){return{metadata_only:!1,version:o.EXPLORE_TABS_API_VERSION}};var o=r(d[1]),n=r(d[2]),s=t(r(d[3])),u=r(d[4]),_=r(d[5])}),"833694",["ba7a76","87916a","fd0757","45db44","c6fd31","79ac7c"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=Object.freeze(['_set_bev_on_new_domain','c','check-account-activation','drawer_open','fbclid','gad_source','gbraid','gclid','gclsrc','ghost','has_logged_out','localized_ghost','location_bb','logo','pagination_search','redirect_params','sem_brand_erf','sem_automaid','utm_campaign','utm_content','utm_id','utm_medium','utm_source','utm_term'])}),"92da7e",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,n=(0,u.default)()){return n.find((({experiment:u})=>u===t))};var u=t(r(d[1]))}),"9439c5",["ba7a76","23c701"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.STAYS_SEARCH_FILTER_KEYS=e.KNOWN_SEARCH_QUERY_PARAMS=void 0;const _=e.STAYS_SEARCH_FILTER_KEYS=['cursor','autosuggestions_options','max_categories','metadata_only','satori_version','search_type','source','treatment_flags','raw_params'];e.KNOWN_SEARCH_QUERY_PARAMS=[..._,'inst','niobe_test_destinations','zoom']}),"977a9f",[]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TIER_TYPES=e.TIER_IDS=e.PDP_URL_TYPES=e.PDP_TYPES=void 0,e.getTier=function(E){switch(E){case P.LUXURY:return L.LUXURY;case P.PLUS:return L.PLUS;case P.MARKETPLACE:default:return L.MARKETPLACE}};let L=e.TIER_TYPES=(function(L){return L.LUXURY="luxury",L.PLUS="plus",L.MARKETPLACE="marketplace",L})({}),P=e.TIER_IDS=(function(L){return L[L.LUXURY=2]="LUXURY",L[L.PLUS=1]="PLUS",L[L.MARKETPLACE=0]="MARKETPLACE",L})({});e.PDP_TYPES=(function(L){return L.MARKETPLACE="MARKETPLACE",L.PLUS="PLUS",L.HOTEL="HOTEL",L.LUXE="LUXE",L})({}),e.PDP_URL_TYPES=(function(L){return L.ROOMS="ROOMS",L.ROOMS_PLUS="ROOMS_PLUS",L.HOTELS="HOTELS",L.LUXURY_LISTINGS="LUXURY_LISTINGS",L})({})}),"bcda48",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.coerceCorrectTypes=k,e.convertToFilterShapeFromURLWithPruning=function(t){const _=A(t);return b(_),_},e.default=A;var _=t(r(d[1])),n=r(d[2]);const s=13,l=Object.freeze(['sw_lat','sw_lng','ne_lat','ne_lng']),o=['lat','lng','radius','min_bathrooms'],c=['adults','cause_id','children','disaster_id','guests','infants','items_offset','items_per_grid','lap_infants','max_duration','max_start_time','max_travel_time','max_trip_length','min_bedrooms','min_beds','min_start_time','min_trip_length','monthly_length','pets','price_bucket','price_max','price_min','experience_price_max','experience_price_min','search_segment_index','section_offset','selected_listing_id','flexible_date_search_filter_type','price_filter_num_nights','price_filter_input_type','zoom_level','monthly_dial_flexible_start_date_search_filter_type','monthly_dial_flexible_end_date_search_filter_type'],u=['btsr','business_employee_host','bypass_targetings','covid_eligible','disable_auto_translation','discounted_stays','empHost','experience_private_booking_only','filter_cause_only','flexible_cancellation','from_lts','hide_dates_and_guests_filters','ib','is_nearby_subway','map_toggle','max_travel_time_changed','metadata_only','preview','search_by_map','search_monthly_stays','superhost','update_price_histogram','work_trip','guest_favorite','drawer_open'],p=['amenities','cancel_policies','collection_ids','experience_categories','experience_languages','experience_product_types','guidebook_item_types','host_promotion_type_ids','host_rule_type_ids','hosting_amenities','languages','listing_types','luxury_quality_levels','property_type_id','restaurant_service_types','seasonal_cancellation_policy_ids','tier_ids','trip_duration_type_ids'],f=['cuisine_filter_tags','dietary_preference_filter_tags','dynamic_section_unique_ids','experience_refinement_tags','flexible_trip_dates','flexible_trip_lengths','kg_and_tags','kg_or_tags','experience_accessibility_tags','experience_kg_or_tags','other_preference_tags','refinement_paths','restaurant_book_types','restaurant_cuisine_types','venue_type_filter_tags'],y=['dynamic_product_ids'],h=Object.freeze(['location','query','place_id']);function b(t){delete t.action,delete t.controller,delete t.page,delete t.refinements,delete t.refinement_path,(0,_.default)(t,'guests')&&!t.guests&&delete t.guests}function x(t){return Math.trunc(Number(t))||0}function v(t){return Number(t)||0}function k(t,{forRequest:n}={forRequest:!1}){const h={...t};return(0,_.default)(h,'zoom')&&(h.zoom=''===h.zoom?s:Number(h.zoom)),o.forEach((t=>{(0,_.default)(h,t)&&(h[t]=v(h[t]))})),c.forEach((t=>{(0,_.default)(h,t)&&(h[t]=x(h[t]))})),l.forEach((t=>{var s;(0,_.default)(h,t)&&(h[t]=n?(s=h[t])?String(s):'':v(h[t]))})),p.forEach((t=>{(0,_.default)(h,t)&&(Array.isArray(h[t])?h[t]=h[t].map(x):delete h[t])})),f.forEach((t=>{(0,_.default)(h,t)&&(Array.isArray(h[t])?h[t]=h[t].map(String):delete h[t])})),y.forEach((t=>{(0,_.default)(h,t)&&(Array.isArray(h[t])||(h[t]=[h[t]]),h[t]=h[t].filter(Boolean).filter((t=>!/\D/.test(String(t))))),h[t]&&0===h[t].length&&delete h[t]})),u.forEach((t=>{(0,_.default)(h,t)&&(h[t]='true'===h[t]||'1'===h[t]||!0===h[t])})),h}function A(t){let s={...t};var l;return h.forEach((t=>{Array.isArray(s[t])&&(s[t]=s[t].find(Boolean)),s[t]||delete s[t]})),'string'==typeof s.refinement_paths&&(s.refinement_paths=[s.refinement_paths]),(0,_.default)(s,'location')&&(s.location=(l=s.location)?(0,n.locationFromURLParameter)(l):l),s=k(s),(0,_.default)(s,'guests')&&!s.guests&&delete s.guests,s}}),"c6fd31",["ba7a76","750095","5cf60b"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function({experimentName:t,exploreTreatments:u,renderingState:o,getErfServer:f}){const{treatmentName:s,log:c}=(0,l.default)(t,u)||{};s&&'manual'===c&&('server-render'===o?f(t):'client-render'===o&&n.default.logCustomHashing(t,s))};var n=t(r(d[1])),l=t(r(d[2]))}),"d271b5",["ba7a76","fc0842","9439c5"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.satorifyQuery=function(t){const{location:u,query:n,...o}=t||{};return{...o,query:n||u}};t(r(d[1])),t(r(d[2]))}),"ea30d6",["ba7a76","750095","3d4f9e"]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;Object.defineProperty(e,"__esModule",{value:!0}),e.getListingCardMigrationParams=function(t){const n=t.findTreatment((0,c.default)('listing_card_migration_sxs_web')),s='treatment'===n&&t.isTrebuchetLaunched((0,o.default)('listing_card_migration_sxs_web_fields_erf1')),l='treatment'===n&&t.isTrebuchetLaunched((0,o.default)('listing_card_migration_sxs_web_fields_erf2')),u='treatment'===n&&t.isTrebuchetLaunched((0,o.default)('listing_card_migration_sxs_web_fields_erf3')),f='treatment'===n&&t.isTrebuchetLaunched((0,o.default)('listing_card_migration_sxs_web_fields_erf4'));return{includeLegacyListingCardFieldsForSxS:'treatment_unknown'!==n,includeDemandStayListing:s||l||u||f,includeDemandStayListingFieldsErf1:s,includeDemandStayListingFieldsErf2:l,includeDemandStayListingFieldsErf3:u,includeDemandStayListingFieldsErf4:f}},e.useListingCardMigrationSxS=function(t,s){(0,n.useEffect)((()=>{y(t,s)}),[t,s])};var n=r(d[1]),s=r(d[2]),l=t(r(d[3])),u=r(d[4]),c=t(r(d[5])),o=t(r(d[6])),f=r(d[7]);function _(t){if(null==t)return null;switch(t){case'ROOMS':return s.PDP_TYPES.MARKETPLACE;case'ROOMS_PLUS':return s.PDP_TYPES.PLUS;case'HOTELS':return s.PDP_TYPES.HOTEL;case'LUXURY_LISTINGS':return s.PDP_TYPES.LUXE;default:return(0,l.default)(t,null)}}function y(t,n){const{includeLegacyListingCardFieldsForSxS:s,includeDemandStayListingFieldsErf1:l,includeDemandStayListingFieldsErf2:c,includeDemandStayListingFieldsErf3:o,includeDemandStayListingFieldsErf4:y}=n??{};if(s&&t){(t?.presentation?.staysSearch?.results?.searchResults??[]).filter((t=>'StaySearchResult'===t?.__typename)).map((t=>[t?.listing?.id,{city:[t?.listing?.city,t?.demandStayListing?.location?.city],localizedCity:[t?.listing?.localizedCityName,t?.demandStayListing?.location?.localizedCityName],latitude:[t?.listing?.coordinate?.latitude,t?.demandStayListing?.location?.coordinate?.latitude],longitude:[t?.listing?.coordinate?.longitude,t?.demandStayListing?.location?.coordinate?.longitude],isAutoTranslated:[t.listing?.isAutoTranslated,t.demandStayListing?.isAutoTranslated],name:[t.listing?.name,t.demandStayListing?.description?.name?.localizedString],pdpType:[t.listing?.pdpType,t.demandStayListing?.pdpType],pdpUrlType:[_(t.listing?.pdpUrlType),t.demandStayListing?.pdpType]}])).forEach((([t,n])=>{Object.keys(n).forEach((s=>{if(!l&&['city','localizedCity'].includes(s))return;if(!c&&['latitude','longitude'].includes(s))return;if(!o&&['isAutoTranslated','name'].includes(s))return;if(!y&&['pdpType'].includes(s))return;const[_=null,S=null]=n[s];let L=!1,p='';if(['latitude','longitude'].includes(s)&&null!=_&&null!=S){const t=Math.abs(_-S);if(L=t<.001,!L){p=t>.002?' (small diff)':' (large diff)'}(0,u.airdogDistribution)('listing_card_migration.coordinate_error',t,{isEqual:L,key:s})}else L=_===S;(0,u.airdogCount)('listing_card_migration.sxs_field_comparison',1,{isEqual:L,key:s}),L||(0,f.warn)(`[listing-card-sxs] field mismatch for ${s}${p}`,{extra:{key:s,expected:_,actual:S,listingId:t}})}))}))}}}),"ef12a6",["ba7a76","07aa1f","bcda48","956d24","3e4681","4d3544","2c6bf9","f2f40f"]);
__d((function(g,r,i,a,m,e,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.P2_MAP_FEED_DECOUPLING_TREATMENT_FLAGS=e.LAUNCHED_ERF_TREATMENT_FLAGS=e.HOMEPAGE_MAP_FEED_DECOUPLING_TREATMENT_FLAGS=void 0;e.P2_MAP_FEED_DECOUPLING_TREATMENT_FLAGS=['feed_map_decouple_m11_treatment'],e.HOMEPAGE_MAP_FEED_DECOUPLING_TREATMENT_FLAGS=['feed_map_decouple_homepage_treatment'],e.LAUNCHED_ERF_TREATMENT_FLAGS=['m1_2024_monthly_stays_dial_treatment_flag','recommended_amenities_2024_treatment_b','filter_redesign_2024_treatment','filter_reordering_2024_roomtype_treatment']}),"f36c5b",[]);
__d((function(g,r,i,a,m,e,d){"use strict";var t=r(d[0]).default;function n(){const E=t(r(d[1]));return n=function(){return E},E}Object.defineProperty(e,"__esModule",{value:!0}),e.isOnlineExperiences=O,e.isOnlineExperiencesSearchRefinementPath=T,e.locationToURLParameter=s,e.makeQueryStrings=u,e.makeSearchPath=N,e.makeSearchURI=function(t,n={}){const E=o(t);0===E.section_offset&&delete E.section_offset;0===E.items_offset&&delete E.items_offset;const{tabId:_}=n;E.tab_id&&E.tab_id!==_&&(E.tab_id=_);let c=N(t,n);return c+=u(E,n),c};var E=t(r(d[2])),_=r(d[3]),c=r(d[4]),l=r(d[5]);function s(t){return(t||'').replace(/\//g,' ').replace(/\)/g,'').replace(/\(/g,'').replace(/\]/g,'').replace(/\[/g,'').replace(/\\/g,'').replace(/\?/g,'').replace(/\s+/g,' ').replace(/-/g,'~').replace(/, ?/g,'--').replace(/ /g,'-').replace(/#/g,'%23').replace(/\./g,'%252E')}function o(t){const n={...t};return['checkin','checkout'].forEach((n=>{t[n]})),n}function u(t,l={}){const{tabId:s}=l,o=Object.freeze(['location','baseUrl','additional_refinements']),u=[...o,'query'];let S=(0,E.default)(t,t.location?o:u);p(t)&&(S.category_tag='Tag:8253',delete S.tier_ids),s===_.EXPLORE_TABS.ADVENTURES?S.refinement_paths=['/experiences/KG/Tag:639']:s===_.EXPLORE_TABS.SELECT_HOMES?(S.tier_ids=[c.TIER_IDS.PLUS],delete S.refinement_paths):s===_.EXPLORE_TABS.FLIGHTS&&(S={});const I=n().default.stringify(S,{arrayFormat:'brackets'});return I.length>0?`?${I}`:''}const S='Tag:6951',I=['Tag:7983','Tag:8020','Tag:8059'],f=Object.freeze(['EXPERIENCES_JUST_ADDED_GROUPING','EXPERIENCES_SELECTED_TIME_TYPE_GROUPING','EXPERIENCES_SELECTED_TAGS_GROUPING','EXPERIENCES_TOP_BOOKED_ONLINE_GROUPING','EXPERIENCES_TAXONOMY_PERSONALIZATION','EXPERIENCES_GEO_LEADERBOARD','EXPERIENCES_CONTINUE_BROWSING','EXPERIENCES_PERSONALIZED_CO_BOOKS','EXPERIENCES_BOOK_AGAIN','EXPERIENCES_UPCOMING_DESTINATION','EXPERIENCES_PRIVATE_BOOKING','EXPERIENCES_TEST_RUN','EXPERIENCES_SERIES','EXPERIENCES_CONTINUE_SERIES','EXPERIENCES_WISHLIST']);function R(t,n){return!!t?.some((t=>{const E=t?.split('/');if(!E||!t?.includes('/section'))return!1;const _=E[E.length-1].split(':')[0];return n.includes(_)}))}function T(t){return n=t.refinement_paths,E=[S,...I],!!n?.some((t=>{const n=t?.split('/');if(!n||0===n.length)return!1;const _=n[n.length-1],c=new Set(_.split(','));return E.some((t=>c.has(t)))}))||R(t.refinement_paths,f);var n,E}function O(t,n){return n===_.EXPLORE_TABS.EXPERIENCES&&(!!t.additional_refinements?.includes('online')||T(t)||t.kg_or_tag===S||t.kg_or_tags?.includes(S))}function P(t,n){return('flex_destinations_search'===t.search_mode||n===_.EXPLORE_TABS.HOMES&&null==t.search_mode)&&null==t.location&&null==t.query&&null==t.place_id&&!(null!=t.omni_page_id&&null!=t.dynamic_product_ids)&&null==t.host_id&&'NEARBY'!==t.location_search}function N(t,n={}){const{tabId:E}=n,c=(0,l.buildTabId)({requestFilters:t,currentTab:E}),o=c===_.EXPLORE_TABS.STORIES,u=!!t.clh,S='p2'===t.china_sem_source,I=E===_.EXPLORE_TABS.FLIGHTS;if(P(t,c))return'/';if(O(t,c))return`/${_.SEARCH_ENDPOINT}/experiences/online`;let f;if(o)f=`/${_.TAB_PATHS[c]}`;else if(u)f='/cl';else if(S)f='/sfx/s';else{if(p(t)||I)return'/';f=n.basePath?`/${n.basePath}`:`/${_.SEARCH_ENDPOINT}`}t.location&&s(t.location)?f+=`/${s(t.location)}`:t.query&&s(t.query)&&(f+=`/${s(t.query)}`),c&&!o&&(f+=`/${_.TAB_PATHS[c]}`);const R=[...t.additional_refinements??[]];return R.length>0&&(f+=`/${R.join("--")}`),f}function p(t){return!!t.tier_ids?.includes(c.TIER_IDS.LUXURY)&&!t.query&&!t.place_id}}),"f4229b",["ba7a76","e950a3","3d4f9e","87916a","bcda48","aea415"]);
//# sourceMappingURL=https://sourcemaps.d.musta.ch/airbnb/static/packages/web/common/frontend/homepage/routes/HomepageRoute/HomepageRoute.prepare.bc855b8f69.js.map